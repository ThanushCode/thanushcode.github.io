<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Thanush G">
    <title>Template</title>
    <link rel="stylesheet" href="css/style2.css">

    <script>
        /* Assignment:reate an HTML document that looks similar to figure 9-7. Write four functions with these headers:
          1. function doPayment()
          2.function doBalance()
          3.function computePayment(principal, annualRate, years, periodsPerYear)
          4.function computeBalance(principal, annualRate, years, periodsPerYear,numberOfPaymentsPaidToDate)
                 The user interface for a loan calculator  
                * The first two functions (doPayment and doBalance)
                * take no parameters are called from an onclick attribute and get input from the user
                * call the computePayment or the computeBalance function display a result to the user
            The computePayment function computes and returns the MONTHLY PAYMENT for a loan with a FIXED ANNUAL interest rate. 
            The formula for computing a loan payment is  p = ar / 1 − (1 + r)−n 
                where p is the payment per period, 
                a is the loan amount, 
                r is the interest rate per period,
                n is the total number of periods throughout the life of the loan.
           The computeBalance function computes and returns the BALANCE for a loan with a fixed annual interest rate. 
           The formula for computing a loan payment is  b = a (1 + r)d −  p ((1 + r)d − 1) / r
                where p is the payment per period,
                a is the loan amount,
                r is the interest rate per period, 
                n is the total number of periods throughout the life of the loan.
           the computeBalance function computes and returns the balance for a loan with a fixed annual interest rate. 
          The formula for computing the balance of a loan after d payments have been made is
                b = a (1 + r)d −  p ((1 + r)d − 1) r
                where b is the balance or payoff amount, a is the loan amount, 
                r is the interest rate per period,
                p is the payment per period, 
                d is the number of payments paid to date.
        */
        function doPayment() {
            let principal = parseFloat(document.getElementById("principal").value);
            let Intreset = parseFloat(document.getElementById("Intreset").value);
            let NumberOfYears = parseFloat(document.getElementById("NumberOfYears").value);
            let paymentPeryeare = parseFloat(document.getElementById("paymentPeryear").value);

            let payment = computePayment(principal, Intreset, NumberOfYears, paymentPeryeare);
            document.getElementById("outputDiv").innerHTML = payment.toFixed(2);
        }

        function doBalance() {
            let principal = parseFloat(document.getElementById("principal").value);
            let annualRate = parseFloat(document.getElementById("Intreset").value);
            let years = parseFloat(document.getElementById("NumberOfYears").value);
            let periodsPerYear = parseFloat(document.getElementById("paymentPeryear").value);
            let numberOfPaymentsPaidToDate = parseFloat(document.getElementById("numberofpaymentPaidtoDate").value);

            let balance = computeBalance(principal, annualRate, years, periodsPerYear, numberOfPaymentsPaidToDate);
            document.getElementById("outputDiv1").innerHTML = balance.toFixed(2);
        }

        function computePayment(principal, annualRate, years, periodsPerYear) {
            return principal * (annualRate / periodsPerYear) / (1.0 - (1.0 + (annualRate / periodsPerYear)) ** - (years * periodsPerYear));
            // p = arnumberofpaymentPaidtoDate1 − (1 + r)−n 
            //where p is the payment per period, a is the loan amount, // r is the interest rate per period,
            //and n is the total number of periods throughout the life of the loan.// p = arnumberofpaymentPaidtoDate1 − (1 + r)−n
            //computePayment function computes and returns the monthly payment for a loan with a fixed annual interest rate
            //p = ar 1 − (1 + r)−n 
        }

        function computeBalance(principal, annualRate, years, periodsPerYear, numberOfPaymentsPaidToDate) {
            let paymentPerPeriod = computePayment(principal, annualRate, years, periodsPerYear);
            let InterestRatePerPeriod = annualRate / periodsPerYear;
            let balance = principal * Math.pow(1 + InterestRatePerPeriod, numberOfPaymentsPaidToDate) - (paymentPerPeriod * (Math.pow(1 + InterestRatePerPeriod, numberOfPaymentsPaidToDate) - 1) / InterestRatePerPeriod);
            return balance;
            // return (principal * ((1.0 + r) ** numberOfPaymentsPaidToDate)) - (p *(((1.0 + r) ** numberOfPaymentsPaidToDate) - 1.0) / r);
            // return principal * ((1 + r) ** numberOfPaymentsPaidToDate) -  (p * ((1 + annualRate / periodsPerYear) ** numberOfPaymentsPaidToDate) - 1) / r;
            // return b = a(1 + r)d -r
            // p((1 + r) d - 1) r
            //where b is the balance or payoff amount, a is the loan amount, 
            //r is the interest rate per period,// p is the payment per period, and // r is rate per period 
            // d is the number of payments paid to date.
            // return b = a(1 + r)d - p((1 + r) d - 1) r //where b is the balance or payoff amount,
            //a is the loan amount, 
            //where b is the balance or payoff amount, a is the loan amount, r is the interest rate per period, 
            // return   principal * (1 + annualRate) ** - (numberOfPaymentsPaidToDate - periodsPerYear((1 + annualRate) * numberOfPaymentsPaidToDate - 1)) * annualRate ;
        }
    </script>
</head>

<body>
    <header>
        <h1>Week 11:Loan calculator </h1>
        <h2>Thanush </h2>
    </header>
    <Main>
        <h3>Loan calculator</h3>
        Amount invested (principal) : <label for="principal"><input placeholder="Amount Borrowed" type="text"
                id="principal" size="15" value="" /></label> <br />
        Annual rate (exampel:0.08) : <label for="Intreset"><input placeholder="Annual interest rate" type="text"
                id="Intreset" size="15" value="" /></label> <br />
        Number of years: <label for="NumberOfYears"><input placeholder="Number Of Years" type="text" id="NumberOfYears"
                size="15" value="" /></label> <br />
        Payment per year : <label for="paymentperyear"><input placeholder="Payment per year" type="text"
                id="paymentPeryear" size="15" value="" /></label><br />
         
        <button type="button" onclick="doPayment()"> Compute Payment </button> <br />
        <hr/>
        Number of payment Paid to Date : <label for="numberofpaymentPaidtoDate"><input
                placeholder="number of payment Paid to Date" type="text" id="numberofpaymentPaidtoDate" size="15"
                value="" /> <br /></label>
        <div id="outputDiv"> </div>
       
        <button type="button" onclick="doBalance()"> compute payoff Amount </button> <br />
        <hr/>
        <div id="outputDiv1"> </div>
    </Main>
    <footer>
        &copy;2020 &bull; Thanush &bull; BYU-Idaho &bull; CIT 160
    </footer>

</body>

</html>